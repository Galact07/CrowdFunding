(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{8216:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return t(9687)}])},9687:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return y}});var a=t(5893),s=t(7294),r=t(9824),n=t(7462),i=t(3871),c=t(6010),o=t(8459),d=t(8935),u=t(2519),p=t(2248);function h(e){var l=e.children,t=e.className,a=(0,c.Z)(t),r=(0,d.Z)(h,e),i=(0,u.Z)(h,e);return s.createElement(i,(0,n.Z)({},r,{className:a}),l)}h.handledProps=["as","children","className"],h.defaultProps={as:"tbody"},h.propTypes={};var m=t(9591),v=t(5150);function f(e){var l=e.active,t=e.children,a=e.className,r=e.collapsing,i=e.content,h=e.disabled,m=e.error,g=e.icon,Z=e.negative,x=e.positive,w=e.selectable,b=e.singleLine,j=e.textAlign,G=e.verticalAlign,N=e.warning,A=e.width,k=(0,c.Z)((0,o.lG)(l,"active"),(0,o.lG)(r,"collapsing"),(0,o.lG)(h,"disabled"),(0,o.lG)(m,"error"),(0,o.lG)(Z,"negative"),(0,o.lG)(x,"positive"),(0,o.lG)(w,"selectable"),(0,o.lG)(b,"single line"),(0,o.lG)(N,"warning"),(0,o.X4)(j),(0,o.Ok)(G),(0,o.H0)(A,"wide"),a),P=(0,d.Z)(f,e),y=(0,u.Z)(f,e);return p.kK(t)?s.createElement(y,(0,n.Z)({},P,{className:k}),v.Z.create(g),i):s.createElement(y,(0,n.Z)({},P,{className:k}),t)}function g(e){var l=e.children,t=e.className,a=e.content,r=e.fullWidth,i=(0,c.Z)((0,o.lG)(r,"full-width"),t),h=(0,d.Z)(g,e),m=(0,u.Z)(g,e);return s.createElement(m,(0,n.Z)({},h,{className:i}),p.kK(l)?a:l)}function Z(e){var l=e.as,t=(0,d.Z)(Z,e);return s.createElement(g,(0,n.Z)({},t,{as:l}))}function x(e){var l=e.as,t=e.className,a=e.sorted,r=(0,c.Z)((0,o.cD)(a,"sorted"),t),i=(0,d.Z)(x,e);return s.createElement(f,(0,n.Z)({},i,{as:l,className:r}))}function w(e){var l=e.active,t=e.cellAs,a=e.cells,r=e.children,h=e.className,m=e.disabled,v=e.error,g=e.negative,Z=e.positive,x=e.textAlign,b=e.verticalAlign,j=e.warning,G=(0,c.Z)((0,o.lG)(l,"active"),(0,o.lG)(m,"disabled"),(0,o.lG)(v,"error"),(0,o.lG)(g,"negative"),(0,o.lG)(Z,"positive"),(0,o.lG)(j,"warning"),(0,o.X4)(x),(0,o.Ok)(b),h),N=(0,d.Z)(w,e),A=(0,u.Z)(w,e);return p.kK(r)?s.createElement(A,(0,n.Z)({},N,{className:G}),(0,i.Z)(a,function(e){return f.create(e,{defaultProps:{as:t}})})):s.createElement(A,(0,n.Z)({},N,{className:G}),r)}function b(e){var l=e.attached,t=e.basic,a=e.celled,r=e.children,m=e.className,v=e.collapsing,f=e.color,x=e.columns,j=e.compact,G=e.definition,N=e.fixed,A=e.footerRow,k=e.headerRow,P=e.headerRows,y=e.inverted,E=e.padded,R=e.renderBodyRow,C=e.selectable,q=e.singleLine,_=e.size,T=e.sortable,z=e.stackable,B=e.striped,D=e.structured,L=e.tableData,O=e.textAlign,X=e.unstackable,F=e.verticalAlign,H=(0,c.Z)("ui",f,_,(0,o.lG)(a,"celled"),(0,o.lG)(v,"collapsing"),(0,o.lG)(G,"definition"),(0,o.lG)(N,"fixed"),(0,o.lG)(y,"inverted"),(0,o.lG)(C,"selectable"),(0,o.lG)(q,"single line"),(0,o.lG)(T,"sortable"),(0,o.lG)(z,"stackable"),(0,o.lG)(B,"striped"),(0,o.lG)(D,"structured"),(0,o.lG)(X,"unstackable"),(0,o.sU)(l,"attached"),(0,o.sU)(t,"basic"),(0,o.sU)(j,"compact"),(0,o.sU)(E,"padded"),(0,o.X4)(O),(0,o.Ok)(F),(0,o.H0)(x,"column"),"table",m),K=(0,d.Z)(b,e),U=(0,u.Z)(b,e);if(!p.kK(r))return s.createElement(U,(0,n.Z)({},K,{className:H}),r);var I={defaultProps:{cellAs:"th"}},W=(k||P)&&s.createElement(g,null,w.create(k,I),(0,i.Z)(P,function(e){return w.create(e,I)}));return s.createElement(U,(0,n.Z)({},K,{className:H}),W,s.createElement(h,null,R&&(0,i.Z)(L,function(e,l){return w.create(R(e,l))})),A&&s.createElement(Z,null,w.create(A)))}f.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],f.defaultProps={as:"td"},f.propTypes={},f.create=(0,m.u5)(f,function(e){return{content:e}}),g.handledProps=["as","children","className","content","fullWidth"],g.defaultProps={as:"thead"},g.propTypes={},Z.handledProps=["as"],Z.propTypes={},Z.defaultProps={as:"tfoot"},x.handledProps=["as","className","sorted"],x.propTypes={},x.defaultProps={as:"th"},w.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],w.defaultProps={as:"tr",cellAs:"td"},w.propTypes={},w.create=(0,m.u5)(w,function(e){return{cells:e}}),b.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],b.defaultProps={as:"table"},b.propTypes={},b.Body=h,b.Cell=f,b.Footer=Z,b.Header=g,b.HeaderCell=x,b.Row=w;var j=t(967),G=t(262),N=t(3165),A=t(7156);let k=e=>{let{Row:l,Cell:t}=b,{id:s,request:r,approversCount:n,address:i}=e,c=r.approvalCount>n/2,o=async()=>{let e=await (0,N.Z)(i),l=await A.Z.eth.getAccounts();await e.methods.approveRequest(s).send({from:l[0]})},d=async()=>{let e=await (0,N.Z)(i),l=await A.Z.eth.getAccounts();await e.methods.finalizeRequest(s).send({from:l[0]})};return(0,a.jsxs)(l,{disabled:r.complete,positive:c&&!r.complete,children:[(0,a.jsx)(t,{children:s}),(0,a.jsx)(t,{children:r.description}),(0,a.jsx)(t,{children:A.Z.utils.fromWei(r.value,"ether")}),(0,a.jsx)(t,{children:r.recipient}),(0,a.jsxs)(t,{children:[r.approvalCount,"/",n]}),(0,a.jsx)(t,{children:r.complete?null:(0,a.jsx)(j.Z,{color:"green",basic:!0,onClick:o,children:"Approve"})}),(0,a.jsx)(t,{children:r.complete?null:(0,a.jsx)(j.Z,{color:"teal",basic:!0,onClick:d,children:"Finalize"})})]})},P=e=>{let{Header:l,Row:t,HeaderCell:s,Body:n}=b;return(0,a.jsxs)(r.Z,{children:[(0,a.jsx)("h3",{children:"Requests"}),(0,a.jsx)(G.Link,{legacyBehavior:!0,route:"/campaigns/".concat(e.address,"/requests/new"),children:(0,a.jsx)("a",{children:(0,a.jsx)(j.Z,{primary:!0,floated:"right",style:{marginBottom:"10px"},children:"Add Requests"})})}),(0,a.jsxs)(b,{children:[(0,a.jsx)(l,{children:(0,a.jsxs)(t,{children:[(0,a.jsx)(s,{children:"ID"}),(0,a.jsx)(s,{children:"Description"}),(0,a.jsx)(s,{children:"Amount"}),(0,a.jsx)(s,{children:"Recipient"}),(0,a.jsx)(s,{children:"Approval Count"}),(0,a.jsx)(s,{children:"Approve"}),(0,a.jsx)(s,{children:"Finalize"})]})}),(0,a.jsx)(n,{children:e.requests.map((l,t)=>(0,a.jsx)(k,{id:t,request:l,address:e.address,approversCount:e.approversCount},t))})]}),(0,a.jsxs)("div",{children:["Found ",e.requestCount," requests."]})]})};P.getInitialProps=async e=>{let l=e.query.address,t=await (0,N.Z)(l),a=await t.methods.getRequestCount().call(),s=await t.methods.approversCount().call(),r=await Promise.all(Array(parseInt(a)).fill().map((e,l)=>t.methods.requests(l).call()));return{address:l,requests:r,requestCount:a,approversCount:s}};var y=P}},function(e){e.O(0,[774,543,737,814,888,179],function(){return e(e.s=8216)}),_N_E=e.O()}]);